!function(a){"object"==typeof module&&module.exports?module.exports=a:a(Highcharts)}(function(a){function b(a,b){var c=e.getElementsByTagName("head")[0],d=e.createElement("script");d.type="text/javascript",d.src=a,d.onload=b,c.appendChild(d)}var c=a.win,d=c.navigator,e=c.document,f=c.URL||c.webkitURL||c,g=/Edge\/|Trident\/|MSIE /.test(d.userAgent),h=g?150:0;a.CanVGRenderer={},a.downloadURL=function(a,b){var f,g=e.createElement("a");if(d.msSaveOrOpenBlob)d.msSaveOrOpenBlob(a,b);else if(void 0!==g.download)g.href=a,g.download=b,g.target="_blank",e.body.appendChild(g),g.click(),e.body.removeChild(g);else try{if(f=c.open(a,"chart"),void 0===f||null===f)throw"Failed to open window"}catch(h){c.location.href=a}},a.svgToDataUrl=function(a){var b=d.userAgent.indexOf("WebKit")>-1&&d.userAgent.indexOf("Chrome")<0;try{if(!b&&d.userAgent.toLowerCase().indexOf("firefox")<0)return f.createObjectURL(new c.Blob([a],{type:"image/svg+xml;charset-utf-16"}))}catch(e){}return"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(a)},a.imageToDataUrl=function(a,b,d,f,g,i,j,k,l){var m,n=new c.Image,o=function(){setTimeout(function(){var c,h=e.createElement("canvas"),i=h.getContext&&h.getContext("2d");try{if(i){h.height=n.height*f,h.width=n.width*f,i.drawImage(n,0,0,h.width,h.height);try{c=h.toDataURL(b),g(c,b,d,f)}catch(k){m(a,b,d,f)}}else j(a,b,d,f)}finally{l&&l(a,b,d,f)}},h)},p=function(){k(a,b,d,f),l&&l(a,b,d,f)};m=function(){n=new c.Image,m=i,n.crossOrigin="Anonymous",n.onload=o,n.onerror=p,n.src=a},n.onload=o,n.onerror=p,n.src=a},a.downloadSVGLocal=function(g,h,i,j,k,l){var m,n,o,p=!0;if("image/svg+xml"===i)try{d.msSaveOrOpenBlob?(n=new MSBlobBuilder,n.append(g),m=n.getBlob("image/svg+xml")):m=a.svgToDataUrl(g),a.downloadURL(m,h),l&&l()}catch(q){k()}else m=a.svgToDataUrl(g),o=function(){try{f.revokeObjectURL(m)}catch(a){}},a.imageToDataUrl(m,i,{},j,function(b){try{a.downloadURL(b,h),l&&l()}catch(c){k()}},function(){var f=e.createElement("canvas"),m=f.getContext("2d"),n=g.match(/^<svg[^>]*width\s*=\s*\"?(\d+)\"?[^>]*>/)[1]*j,q=g.match(/^<svg[^>]*height\s*=\s*\"?(\d+)\"?[^>]*>/)[1]*j,r=function(){m.drawSvg(g,0,0,n,q);try{a.downloadURL(d.msSaveOrOpenBlob?f.msToBlob():f.toDataURL(i),h),l&&l()}catch(b){k()}finally{o()}};f.width=n,f.height=q,c.canvg?r():(p=!0,b(a.getOptions().global.canvasToolsURL,function(){r()}))},k,k,function(){p&&o()})},a.Chart.prototype.getSVGForLocalExport=function(b,c,d,e){var f,g,h,i,j,k=this,l=0,m=function(a,b,c){++l,c.imageElement.setAttributeNS("http://www.w3.org/1999/xlink","href",a),l===f.length&&e(k.sanitizeSVG(g.innerHTML))};a.wrap(a.Chart.prototype,"getChartHTML",function(a){return g=this.container.cloneNode(!0),a.apply(this,Array.prototype.slice.call(arguments,1))}),k.getSVGForExport(b,c),f=g.getElementsByTagName("image");try{if(f.length)for(i=0,j=f.length;j>i;++i)h=f[i],a.imageToDataUrl(h.getAttributeNS("http://www.w3.org/1999/xlink","href"),"image/png",{imageElement:h},b.scale,m,d,d,d);else e(k.sanitizeSVG(g.innerHTML))}catch(n){d()}},a.Chart.prototype.exportChartLocal=function(b,c){var d=this,e=a.merge(d.options.exporting,b),f=e&&e.type||"image/png",h=function(){if(e.fallbackToExportServer===!1){if(!e.error)throw"Fallback to export server disabled";e.error()}else d.exportChart(e)};g&&"image/svg+xml"!==f&&d.container.getElementsByTagName("image").length?h():d.getSVGForLocalExport(e,c,h,function(b){var c=(e.filename||"chart")+"."+("image/svg+xml"===f?"svg":f.split("/")[1]);a.downloadSVGLocal(b,c,f,e.scale,h)})},a.getOptions().exporting.buttons.contextButton.menuItems=[{textKey:"printChart",onclick:function(){this.print()}},{separator:!0},{textKey:"downloadPNG",onclick:function(){this.exportChartLocal()}},{textKey:"downloadJPEG",onclick:function(){this.exportChartLocal({type:"image/jpeg"})}},{textKey:"downloadSVG",onclick:function(){this.exportChartLocal({type:"image/svg+xml"})}}]});